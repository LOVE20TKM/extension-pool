# LOVE20 链群扩展协议之链群行动者扩展协议（初稿）

## 1. 关于协议

此扩展协议，基于 LOVE20 扩展协议标准，扩展行动参与机制，允许行动者以链群的方式参与行动。

- 行动者可自由加入退出所选链群，进行可验证的共识行动
- 行动者基于所在链群的链群群主的验证结果获得行动铸币激励
- 支持此行动的治理者，通过不信任投票降低特定链群整体收益的方式，来监督和惩罚作弊或违背行动验证规则的链群

## 2. 初始参数

### 2.1 最小治理票占比

持有大于等于 最小治理票占比 的治理者，可创建链群成为链群群主

### 2.2 容量倍数

- 单个链群最小容量：已铸造代币总量 \* 最小治理票占比 \* 容量倍数
- 链群群主链群理论容量上限：已铸造代币总量 \* 链群群主治理票占比 \* 容量倍数

### 2.3 质押倍数

- 质押量 = 链群容量 / 质押倍数
- 最大质押量：链群群主链群的累计质押量上限：链群群主链群理论容量上限 / 质押倍数

### 2.4 最大参与代币倍数

- 单个行动者最大参与代币数 = 已铸造代币总量 / 最大参与代币倍数

## 3. 治理者

### 3.1 不信任投票

完成非弃权票验证的行动治理者，在验证阶段可对一个或多个链群进行不信任投票，每个链群的不信任票不超过自己的验证票数，以惩罚未按照行动规则进行验证的链群，降低行动者在此链群的铸币激励。

对特定链群投不信任票，需提交说明原因公示。

实际链群铸币率 = 当轮累计获得的不信任票 / 当轮非弃权的行动验证总票数

每个治理者投出不信任票，都将更新本轮：

- 实际链群总票数 = 所有链群实际可用票数
- 被投链群的实际可用票数 = 链群参与代币总数 \* 实际链群铸币率

## 4. 链群群主

任何治理者可以在[链群](https://love20tkm.github.io/group/)里铸造自己的链群 NFT 成为链群群主

### 4.1 链群启动或恢复

治理者可以选择自己持有的链群 NFT 来启动一个新链群或恢复旧链群，启动时需提供：

- 链群说明：例如：一些注意事项，以及如何联系到链群群主，如何加入所在链群的行动者群（例如：QQ 群、微信验证群）等
- 行动者最小参与量
- 行动者最大参与量（可选）：0 为不做限制

链群启动时，需无偿质押代币，决定链群的容量上限。

链群容量 = 累计质押量 \* 质押倍数

### 4.2 链群更新

立即更新，并在当轮立即生效（不影响已参与的行动者）

- 链群说明
- 行动者最小参与量
- 行动者最大参与量

### 4.3 链群扩容

链群群主可追加质押，增加链群容量上限。行动者加入链群时，如果超出链群容量，将无法加入。

### 4.4 链群验证

每轮的验证阶段，链群群主基于行动的验证规则，验证链群中每个行动者的可验证共识行动，给予链群验证票，决定每个行动者的铸币量。

每轮的验证阶段，下面 4 种交互情况任意情况发生，立即在交互前快照所在链群待验证行动者地址与每个行动者的参与代币数（每轮只触发一次快照生成）， 作为本轮链群群主的验证基准。

- 行动者加入链群
- 行动者退出链群
- 链群群主提交链群验证
- 治理者提交不信任票

注意：

- 所有行动者的验证票总数不得超过链群参与代币总量
- 若当前轮次链群群主未提交有效的链群验证，或所有行动者的验证票总数为 0，则自动放弃本链群所有激励，分给其他链群

### 4.4 链群指定验证者

链群群主可为链群，设定不同的钱包地址作为链群验证者，链群验证者和链群群主都可以提交链群的验证结果。

### 4.5 链群停止

链群群主在链群创建后的下一轮开始，可随时停止链群，并立即返还质押代币。

链群停止后，行动者可继续领取之前未领取的行动铸币激励。

已停止的链群，新行动者无法加入，现有行动者也无法追加代币；链群群主也无法提交验证。

## 5. 行动者

### 5.1 加入行动

行动者参与行动时，需指定一个链群 ID

### 5.2 铸造行动激励

行动者加入后，下一轮开始验证，验证后可铸造自己的行动激励

行动者铸造行动激励 = 行动者本轮验证票 / 链群参与代币总量 \* 链群实际铸币激励

链群实际铸币激励 = 行动总激励 \* 链群实际可用票数 / 实际链群总票数

### 5.3 退出行动

可随时退出并立即返还累计参与的所有代币
