# LOVE20 行动扩展协议之矿池扩展协议（初稿）

## 0. 关于矿池协议

此扩展协议，基于 LOVE20 扩展协议标准，扩展行动参与机制，允许以矿池的方式参与行动。

- 矿工可自由加入退出所选矿池，进行可验证的共识行动
- 矿池主每轮对矿工进行验证，矿工获得行动铸币激励，矿池主获得矿池服务铸币激励
- 支持此行动的治理者，通过不信任投票降低特定矿池整体收益，来监督和惩罚作弊或违背行动验证规则的矿池主

## 1. 核心优势

### 1.1 参与体验提升

- 矿工：从概率铸币变为每轮确定铸币，参与门槛大幅降低
- 规模：去中心化矿池机制支持现有社群加速裂变，外部社群大规模整体迁入

### 1.2 激励机制完善

- 矿池主：通过提供专业服务获得矿池服务费激励
- 市场化：竞争促进服务质量提升和专业团队形成

### 1.3 治理模式优化

- 效率：治理者从繁重验证工作中解放，聚焦行动决策和监督
- 公平：不信任投票机制保障验证公平性

## 2. 初始参数

### 2.1 最小治理票占比

持有大于等于 最小治理票占比 的治理者，可创建矿池成为矿池主

### 2.2 容量倍数

- 单个矿池最小容量：已铸造代币总量 \* 最小治理票占比 \* 容量倍数
- 矿池主矿池累计容量上限：已铸造代币总量 \* 矿池主治理票占比 \* 容量倍数

### 2.3 质押倍数

- 质押量 = 矿池容量 / 质押倍数
- 最大质押量：矿池主矿池的累计质押量上限：矿池主累计矿池容量上限 / 质押倍数

### 2.4 矿工最大参与代币数上限倍数

- 单个矿工最大参与代币数 = 已铸造代币总量 / 矿工最大参与代币上限倍数

## 3. 治理者

### 3.1 不信任投票

完成非弃权票验证的行动治理者，可以在验证阶段对每个矿池进行不信任投票，每个矿池的不信任票不超过自己的验证票数，以惩罚未按照行动规则进行验证的矿池，降低包括矿池主和矿工在内的矿池整体铸币激励。

降低的比例 = 当轮累计获得的不信任票 / 当轮非弃权的行动验证总票数

## 4. 矿池主

### 4.1 矿池创建

治理者可以创建一个或多个矿池成为矿池主，并设定矿池的：

- 矿池说明：例如：一些注意事项，以及如何联系到矿池主，如何加入所在矿池的矿工群等
- 加入附加信息：矿工在加入挖矿时，需提供的信息：例如：社交账号的昵称
- 矿池服务费率：收取矿工铸币激励的比例，基于市场竞争自由设定，值范围 0~100，对应 0%~100%
- 矿工最小参与量：参与矿池需要至少多少代币

其中只有矿池说明可更新修改，其余一旦设定，无法变更。

矿池创建时，需无偿质押代币，决定矿池的容量上限。

矿池容量 = 累计质押量 \* 质押倍数

### 4.2 矿池扩容

矿池主可追加质押，增加矿池容量上限。矿工加入矿池时，如果超出矿池容量，将无法加入。

### 4.3 矿池验证

每轮的验证阶段，矿池主基于行动的验证规则，验证自己管理的矿池中每个矿工的可验证共识行动，给予矿池验证票，决定每个矿工的铸币量。

每轮的验证阶段，下面 3 种交互情况任意情况发生，立即在交互前快照所在矿池待验证矿工地址与每个矿工的参与代币数（每轮只触发一次快照生成）， 作为本轮矿池主的验证基准。

- 矿工加入矿池
- 矿工退出矿池
- 矿池主提交矿池验证

注意：

- 所有矿工的验证票总数不得超过矿池参与代币总量
- 若当前轮次矿池主未提交有效的矿池验证，或所有矿工的验证票总数为 0，则自动放弃本矿池所有激励，分给其他矿池

### 4.4 矿池服务激励铸造

矿池主每轮铸造矿池服务激励，并同步销毁不信任票对应的矿池服务激励。

矿池服务铸币激励 = 矿池实际铸币激励 \* 矿池服务费率

矿池理论铸币激励 = 矿池代币参与量 / 所有矿池代币参与总量 \* 行动铸币激励

矿池实际铸币激励 = 矿池理论铸币激励 \* （1 - 不信任票/ 当轮非弃权的行动验证总票数）

矿池销毁铸币激励 = 矿池理论铸币激励 - 矿池实际铸币激励

### 4.5 矿池停止

矿池主在矿池创建后的下一轮开始，可随时停止矿池，并立即返还质押代币。

矿池停止后，矿工可继续领取之前未领取的行动铸币激励。

已停止的矿池，矿工无法加入，现有矿工也无法追加代币。

## 5. 矿工

### 5.1 加入矿池

矿工可以通过矿池 ID，将代币放入矿池进行挖矿

注意：同一个行动下，只能参与一个矿池的挖矿，不可以同时参与多个矿池。

### 5.2 铸造行动激励

矿工加入后，下一轮开始验证，验证后可铸造自己的行动激励

矿工铸造行动激励 = 矿工本轮得分 / 矿池总得分 \* 矿池实际铸币激励 \* （1-矿池服务费率）

### 5.3 退出矿池

可随时退出矿池并立即返还累计参与的所有代币
